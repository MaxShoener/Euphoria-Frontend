<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Euphoria</title>
<style>
  body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f5f5f5; }
  header { background: #222; color: #fff; padding: 10px; text-align: center; }
  #controls { padding: 10px; display: flex; justify-content: center; gap: 5px; }
  input { width: 300px; padding: 5px; }
  button { padding: 5px 10px; }
  iframe { width: 100%; height: 90vh; border: none; }
</style>
</head>
<body>
<header><h1>Euphoria</h1></header>
<div id="controls">
  <button id="back">◀ Back</button>
  <button id="forward">▶ Forward</button>
  <input type="text" id="url" placeholder="Type URL or search..." />
  <button id="go">Go</button>
</div>
<iframe id="browser" src=""></iframe>

<script>
const iframe = document.getElementById('browser');
const input = document.getElementById('url');
const goBtn = document.getElementById('go');
const backBtn = document.getElementById('back');
const forwardBtn = document.getElementById('forward');

// Your deployed backend
const backend = 'https://wisp-server-w7nx.onrender.com/browse?url=';

// Simple history
let historyStack = [];
let historyIndex = -1;

function loadURL(url) {
  if (!url.includes('://')) {
    url = 'https://www.google.com/search?q=' + encodeURIComponent(url);
  }
  iframe.src = backend + encodeURIComponent(url);

  // Update history
  if (historyIndex < historyStack.length - 1) {
    historyStack = historyStack.slice(0, historyIndex + 1);
  }
  historyStack.push(url);
  historyIndex++;
}

goBtn.onclick = () => loadURL(input.value);
input.addEventListener('keydown', e => {
  if (e.key === 'Enter') loadURL(input.value);
});

backBtn.onclick = () => {
  if (historyIndex > 0) {
    historyIndex--;
    iframe.src = backend + encodeURIComponent(historyStack[historyIndex]);
    input.value = historyStack[historyIndex];
  }
};

forwardBtn.onclick = () => {
  if (historyIndex < historyStack.length - 1) {
    historyIndex++;
    iframe.src = backend + encodeURIComponent(historyStack[historyIndex]);
    input.value = historyStack[historyIndex];
  }
});
</script>
</body>
</html>
