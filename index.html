<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Euphoria Proxy</title>
<style>
  body {
    background: #000;
    color: #0f0;
    font-family: monospace;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }
  #toolbar {
    display: flex;
    justify-content: center;
    align-items: center;
    background: #111;
    width: 100%;
    padding: 8px;
    border-bottom: 1px solid #0f0;
  }
  button {
    background: #000;
    color: #0f0;
    border: 1px solid #0f0;
    padding: 6px 10px;
    margin: 0 4px;
    cursor: pointer;
  }
  input {
    background: #000;
    color: #0f0;
    border: 1px solid #0f0;
    padding: 6px;
    width: 40%;
    margin: 0 6px;
  }
  iframe {
    flex: 1;
    width: 100%;
    border: none;
  }
  #status {
    position: absolute;
    top: 8px;
    right: 16px;
    font-size: 12px;
  }
</style>
</head>
<body>
  <div id="toolbar">
    <button id="back">←</button>
    <button id="forward">→</button>
    <button id="refresh">⟳</button>
    <button id="home">⌂</button>
    <input id="url" placeholder="Enter URL...">
    <button id="go">Go</button>
    <button id="fullscreen">⛶</button>
    <button id="switch">Switch Proxy</button>
  </div>
  <div id="status">Engine: loading...</div>
  <iframe id="view" src=""></iframe>

<script>
const backend = "https://ideological-merna-maxshoener-af9383a9.koyeb.app";
const frame = document.getElementById("view");
const urlBox = document.getElementById("url");
const statusBox = document.getElementById("status");
let engine = "ultraviolet";

async function loadEngine() {
  try {
    const res = await fetch(`${backend}/engine`);
    const j = await res.json();
    engine = j.engine;
    statusBox.textContent = "Engine: " + engine;
  } catch {
    statusBox.textContent = "Engine: offline";
  }
}

async function go(url) {
  if (!/^https?:\/\//i.test(url)) url = "https://" + url;
  urlBox.value = url;
  frame.src = `${backend}/proxy?url=${encodeURIComponent(url)}`;
}

document.getElementById("go").onclick = () => go(urlBox.value);
document.getElementById("home").onclick = () => go("example.com");
document.getElementById("refresh").onclick = () => frame.contentWindow.location.reload();
document.getElementById("back").onclick = () => frame.contentWindow.history.back();
document.getElementById("forward").onclick = () => frame.contentWindow.history.forward();
document.getElementById("fullscreen").onclick = async () => {
  if (!document.fullscreenElement) await document.documentElement.requestFullscreen();
  else await document.exitFullscreen();
};
document.getElementById("switch").onclick = async () => {
  const newEngine = engine === "ultraviolet" ? "scramjet" : "ultraviolet";
  const res = await fetch(`${backend}/engine?set=${newEngine}`);
  const j = await res.json();
  engine = j.engine;
  statusBox.textContent = "Engine: " + engine;
};

loadEngine();
</script>
</body>
</html>