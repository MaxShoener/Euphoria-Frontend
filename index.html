<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Euphoria</title>
<style>
  body { margin:0; font-family:Arial,sans-serif; background:#f5f5f5; display:flex; flex-direction:column; height:100vh; }
  header { background:#4a90e2; color:white; padding:1rem; text-align:center; font-size:1.5rem; }
  #controls { display:flex; padding:0.5rem; gap:0.5rem; }
  #urlInput { flex:1; padding:0.5rem; font-size:1rem; }
  button { padding:0.5rem 1rem; font-size:1rem; cursor:pointer; }
  iframe { flex:1; border:none; width:100%; }
</style>
</head>
<body>

<header>Euphoria</header>

<div id="controls">
  <button id="backBtn">◀ Back</button>
  <button id="forwardBtn">▶ Forward</button>
  <input type="text" id="urlInput" placeholder="Type URL or search...">
  <button id="goBtn">Go</button>
</div>

<iframe id="browserFrame"></iframe>

<script>
const BACKEND = 'https://wisp-server-w7nx.onrender.com';
const iframe = document.getElementById('browserFrame');
const input = document.getElementById('urlInput');
const goBtn = document.getElementById('goBtn');
const backBtn = document.getElementById('backBtn');
const forwardBtn = document.getElementById('forwardBtn');

let historyStack = [];
let historyIndex = -1;

async function navigate(url) {
  if (!url.startsWith('http')) url = `https://www.google.com/search?q=${encodeURIComponent(url)}`;
  iframe.src = `${BACKEND}/browse?url=${encodeURIComponent(url)}`;
  historyStack = historyStack.slice(0, historyIndex+1);
  historyStack.push(url);
  historyIndex++;
}

goBtn.addEventListener('click', () => navigate(input.value));
input.addEventListener('keydown', e => { if(e.key==='Enter') navigate(input.value); });

backBtn.addEventListener('click', () => {
  if(historyIndex>0){
    historyIndex--;
    iframe.src = `${BACKEND}/browse?url=${encodeURIComponent(historyStack[historyIndex])}`;
    input.value = historyStack[historyIndex];
  }
});

forwardBtn.addEventListener('click', () => {
  if(historyIndex<historyStack.length-1){
    historyIndex++;
    iframe.src = `${BACKEND}/browse?url=${encodeURIComponent(historyStack[historyIndex])}`;
    input.value = historyStack[historyIndex];
  }
});
</script>

</body>
</html>
