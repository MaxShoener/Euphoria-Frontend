<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Euphoria Browser</title>
<style>
  body { margin: 0; font-family: Arial, sans-serif; overflow: hidden; }
  #topbar { background: #000; color: #fff; display: flex; align-items: center; padding: 5px; }
  #topbar button, #topbar input {
    margin: 0 2px; padding: 5px 10px; height: 35px; font-size: 14px;
  }
  #url { flex: 1; font-size: 14px; }
  #browser-frame { width: 100%; height: calc(100vh - 45px); border: none; }
  .fullscreen #topbar { display: none; }
  .fullscreen #browser-frame { height: 100vh; }
</style>
</head>
<body>
<div id="topbar">
  <button id="back">‚óÄ Back</button>
  <button id="forward">Forward ‚ñ∂</button>
  <button id="home">üè† Home</button>
  <button id="fullscreen">‚õ∂ Fullscreen</button>
  <input id="url" type="text" placeholder="Enter URL">
  <button id="go">Go</button>
</div>
<iframe id="browser-frame"></iframe>

<script>
const iframe = document.getElementById("browser-frame");
const urlInput = document.getElementById("url");

let historyStack = [];
let historyIndex = -1;

function loadUrl(url) {
  if (!/^https?:\/\//i.test(url)) url = "https://" + url;
  iframe.src = `/proxy?url=${encodeURIComponent(url)}`;

  if (historyIndex === -1 || historyStack[historyIndex] !== url) {
    historyStack = historyStack.slice(0, historyIndex + 1);
    historyStack.push(url);
    historyIndex++;
  }
  urlInput.value = url;
}

document.getElementById("back").onclick = () => {
  if (historyIndex > 0) {
    historyIndex--;
    iframe.src = `/proxy?url=${encodeURIComponent(historyStack[historyIndex])}`;
    urlInput.value = historyStack[historyIndex];
  }
};
document.getElementById("forward").onclick = () => {
  if (historyIndex < historyStack.length - 1) {
    historyIndex++;
    iframe.src = `/proxy?url=${encodeURIComponent(historyStack[historyIndex])}`;
    urlInput.value = historyStack[historyIndex];
  }
};
document.getElementById("home").onclick = () => loadUrl("https://www.google.com");
document.getElementById("go").onclick = () => loadUrl(urlInput.value);
urlInput.addEventListener("keydown", e => { if (e.key === "Enter") loadUrl(urlInput.value); });

document.getElementById("fullscreen").onclick = () => document.body.classList.add("fullscreen");
document.addEventListener("keydown", e => { if (e.key === "Escape") document.body.classList.remove("fullscreen"); });

loadUrl("https://www.google.com");
</script>
</body>
</html>
