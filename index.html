<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Euphoria</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f9f9f9;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }
  header {
    background: #2b2b2b;
    color: white;
    padding: 1rem;
    text-align: center;
  }
  #controls {
    display: flex;
    padding: 0.5rem;
    background: #eee;
  }
  #urlInput {
    flex: 1;
    padding: 0.5rem;
    font-size: 1rem;
  }
  button {
    padding: 0.5rem 1rem;
    margin-left: 0.5rem;
    font-size: 1rem;
    cursor: pointer;
  }
  #output {
    flex: 1;
    width: 100%;
    border: none;
  }
</style>
</head>
<body>
<header>Euphoria</header>

<div id="controls">
  <input id="urlInput" type="text" placeholder="Enter URL or search query..." />
  <button id="goBtn">Go</button>
  <button id="backBtn">◀</button>
  <button id="forwardBtn">▶</button>
</div>

<iframe id="output"></iframe>

<script>
const BACKEND_URL = "https://wisp-server-w7nx.onrender.com"; // your backend
const input = document.getElementById('urlInput');
const output = document.getElementById('output');
const goBtn = document.getElementById('goBtn');
const backBtn = document.getElementById('backBtn');
const forwardBtn = document.getElementById('forwardBtn');

let historyStack = [];
let historyIndex = -1;

function loadURL(url) {
  if (!/^https?:\/\//i.test(url)) {
    url = 'https://www.google.com/search?q=' + encodeURIComponent(url);
  }

  output.src = `${BACKEND_URL}/browse?url=${encodeURIComponent(url)}&t=${Date.now()}`;

  // Manage history
  if (historyIndex === -1 || historyStack[historyIndex] !== url) {
    historyStack = historyStack.slice(0, historyIndex + 1);
    historyStack.push(url);
    historyIndex++;
  }
}

goBtn.onclick = () => loadURL(input.value.trim());
input.addEventListener('keydown', e => { if(e.key === 'Enter') loadURL(input.value.trim()); });
backBtn.onclick = () => { if(historyIndex>0) { historyIndex--; loadURL(historyStack[historyIndex]); } };
forwardBtn.onclick = () => { if(historyIndex<historyStack.length-1) { historyIndex++; loadURL(historyStack[historyIndex]); } };
</script>
</body>
</html>